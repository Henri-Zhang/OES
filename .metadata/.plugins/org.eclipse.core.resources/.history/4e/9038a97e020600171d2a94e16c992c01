AUI().use(
    'aui-io-request',
    'anim',
    function (A) {
        var resourceURL = A.one('input[name*=resourceURL]').get('value');
        var examId = A.one('input[name*=examId]').get('value');
        var studentId = A.one('input[name*=studentId]').get('value');

        var questionList = A.one('div.question-list');
        var questionListWidth = questionList.width();

        A.all('input[type="radio"]').on(
            'click',
            function(event) {
                var node = event.target;
                var result = node.get('value');
                var questionOrder = node.get('name').split('_').pop();
                A.io.request(resourceURL, {
                    method: 'post',
                    data: {
                        'examId': examId,
                        'studentId': studentId,
                        'questionOrder': questionOrder,
                        'result': result
                    }
                });
            }
        );

        A.one('button[name*=prevQuestion]').on(
                'click',
                function(e) {
                var anim = new A.Anim({
                    node: 'div.question-list',
                    duration: 1,
                    to: {
                        left: '100px',
                        opacity: '1'
                    },
                    easing: A.Easing.backIn
                });
                anim.run();
        });

        A.one('button[name*=nextQuestion]').on(
                'click',
                function(e) {
            	var currentMarginLeft = questionList.getMargin('left');
                var targetMarginLeft = currentMarginLeft - 500;
                var anim = new A.Anim({
                    node: 'div.question-list',
                    duration: 1,
                    to: {
                        'margin-left': targetMarginLeft.toString(),
                    },
                    easing: A.Easing.bounceOut
                });
                anim.run();
        });

    }
);