<?xml version="1.0" encoding="UTF-8"?>

<custom-sql>
    <sql id="priv.barrow.service.persistence.QuestionRecordLinkFinder.findRecentUpdateQuestionReocrdLinks">
        <![CDATA[
            SELECT
                questionorder, ddlrecordid, active_, questiondescription
            FROM
                oes_questionrecordlink, ddlrecord
            WHERE
                oes_questionrecordlink.ddlrecordid = ddlrecord.recordid
            AND
                oes_questionrecordlink.active_ = true
            ORDER BY
                ddlrecord.modifieddate
            DESC
            LIMIT
                ?
        ]]>
    </sql>
    <sql id="priv.barrow.service.persistence.QuestionRecordLinkFinder.findRandomQuestionReocrdLinks">
        <![CDATA[
            SELECT
                questionorder, ddlrecordid
            FROM
                oes_questionrecordlink
            ORDER BY
                random()
            LIMIT
                ?
        ]]>
    </sql>
    <sql id="priv.barrow.service.persistence.QuestionRecordLinkFinder.searchQuestionReocrdLinks">
        <![CDATA[
            SELECT
                questionorder, ddlrecordid, active_, questiondescription
            FROM
                oes_questionrecordlink, ddlrecord
            WHERE
                oes_questionrecordlink.ddlrecordid = ddlrecord.recordid
            AND
                oes_questionrecordlink.active_ = true
            and
                questionorder > ?
            and
                questionorder < ?
            and
                ddlrecord.modifieddate > ?
            and
                ddlrecord.modifieddate < ?
            and
                questiondescription
                like
                    '%?%'
            and
                ddlrecord.versionusername
                like
                    '%?%'
            ORDER BY
                questionorder
            LIMIT
                ?
            offset
                ?
        ]]>
</custom-sql>